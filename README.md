# Театральная система управления

Система управления театральной труппой с графическим интерфейсом.

## Структура проекта

```
tt/
├── venv/              # Виртуальное окружение
├── src/               # Исходный код
│   ├── __init__.py
│   ├── main.py        # Главный модуль с UI
│   ├── models/        # Модели данных
│   ├── database/      # Работа с БД
│   │   ├── __init__.py
│   │   ├── connection.py  # Подключение к MySQL
│   │   └── queries.py     # SQL запросы
│   ├── api/           # API endpoints
│   ├── utils/         # Вспомогательные функции
│   │   ├── __init__.py
│   │   ├── theme.py       # Управление темами
│   │   └── validators.py  # Валидация данных
│   ├── export_to_pdf.py   # Экспорт в PDF
│   └── export_to_xlsx.py  # Экспорт в Excel
├── config/            # Конфигурация
│   ├── __init__.py
│   └── database.py    # Конфигурация БД
├── database/
│   └── migrations/    # Миграции БД
├── docs/              # Документация
│   ├── API.md         # API документация
│   └── EXPORT.md      # Руководство по экспорту
├── reports/           # Экспортированные отчеты
├── tests/             # Тесты
├── requirements.txt   # Основные зависимости
├── requirements-dev.txt  # Зависимости для разработки
├── .env.example       # Шаблон переменных окружения
├── .gitignore         # Игнорируемые файлы
├── README.md          # Документация
└── pyproject.toml     # Конфигурация проекта
```

## Установка

1. Создайте виртуальное окружение:
```bash
python -m venv venv
```

2. Активируйте виртуальное окружение:
- Windows: `venv\Scripts\activate`
- Linux/Mac: `source venv/bin/activate`

3. Установите зависимости:
```bash
pip install -r requirements.txt
```

4. Создайте файл `.env` на основе `.env.example` и настройте параметры подключения к БД:
```bash
cp .env.example .env
```

5. Запустите приложение:
```bash
python src/main.py
```

## Использование

Приложение предоставляет графический интерфейс для управления:
- Актерами
- Авторами
- Режиссерами
- Пьесами
- Постановками
- Спектаклями
- Репетициями
- Ролями
- Театрами
- Местами проведения

## Экспорт отчетов

Приложение поддерживает экспорт отчетов в форматах PDF и XLSX через графический интерфейс:

1. **Статистический отчет** - Общая статистика системы с графиками (PDF/XLSX)
2. **Детальный отчет** - Подробные таблицы со всеми данными (PDF/XLSX)
3. **Полный Excel отчет** - Комплексный отчет с аналитикой (XLSX)

Отчеты сохраняются в папку `reports/` по умолчанию, но можно выбрать любое место сохранения через диалог экспорта.

Подробнее см. [docs/EXPORT.md](docs/EXPORT.md)

### Программный экспорт

- PDF отчеты: `python -m src.export_to_pdf`
- Excel отчеты: `python -m src.export_to_xlsx`

## Разработка

Для разработки установите дополнительные зависимости:
```bash
pip install -r requirements-dev.txt
```
